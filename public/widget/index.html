<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Consulente FV</title>
    <link rel="stylesheet" href="widget.css" />
  </head>
  <body>
    <div class="app" id="appRoot">
      <header class="topbar">
        <div>
          <h1 id="headerTitle">Consulente FV</h1>
          <p id="headerSub">Simula il risparmio EV + fotovoltaico</p>
        </div>
        <button id="closeBtn" class="icon-btn" type="button" aria-label="Chiudi">Ã—</button>
      </header>

      <main id="messages" class="messages" aria-live="polite"></main>

      <section class="quick-actions">
        <button id="toggleCalc" class="ghost" type="button">Simula Risparmio</button>
        <button id="toggleLead" class="ghost" type="button">Lascia Contatto</button>
      </section>

      <section id="calcPanel" class="panel hidden" aria-label="Calcolatore">
        <h2>Calcolatore EV + FV</h2>

        <label for="autoKey">Auto elettrica</label>
        <select id="autoKey" required></select>

        <label for="kmAnnui">Km annui</label>
        <input id="kmAnnui" type="number" placeholder="15000" min="1" required />

        <label for="consumoCustom">Consumo custom (kWh/100km, opzionale)</label>
        <input id="consumoCustom" type="number" placeholder="Lascia vuoto per stima" min="1" step="0.1" />

        <label for="prezzoPubblico">Prezzo ricarica pubblica/rete (EUR/kWh)</label>
        <input id="prezzoPubblico" type="number" placeholder="0.65" min="0.01" step="0.01" required />

        <label for="impianto">Impianto FV</label>
        <select id="impianto" required></select>

        <label for="quotaEVdaFV">Quota ricarica EV coperta da FV (%)</label>
        <input id="quotaEVdaFV" type="number" placeholder="60" min="0" max="100" required />

        <label for="prezzoReteCasa">Prezzo energia casa (EUR/kWh)</label>
        <input id="prezzoReteCasa" type="number" placeholder="0.25" min="0.01" step="0.01" required />

        <label for="packageKey">Pacchetto (opzionale per rientro)</label>
        <select id="packageKey">
          <option value="">Nessuno</option>
        </select>

        <button id="runCalc" type="button">Calcola</button>
      </section>

      <section id="leadPanel" class="panel hidden" aria-label="Contatto">
        <h2>Richiesta contatto</h2>
        <label for="leadName">Nome</label>
        <input id="leadName" type="text" placeholder="Mario Rossi" />

        <label for="leadEmail">Email</label>
        <input id="leadEmail" type="email" placeholder="mario@email.it" />

        <label for="leadPhone">Telefono</label>
        <input id="leadPhone" type="tel" placeholder="+39..." />

        <label for="leadMessage">Messaggio</label>
        <textarea id="leadMessage" rows="3" placeholder="Richiedo informazioni"></textarea>

        <label class="consent">
          <input id="leadConsent" type="checkbox" />
          Acconsento al trattamento dati per essere ricontattato.
        </label>

        <button id="sendLead" type="button">Invia contatto</button>
      </section>

      <form id="chatForm" class="chat-form">
        <input id="chatInput" type="text" placeholder="Scrivi qui..." autocomplete="off" />
        <button type="submit">Invia</button>
      </form>
    </div>

    <script src="widget.js"></script>
  </body>
</html>
